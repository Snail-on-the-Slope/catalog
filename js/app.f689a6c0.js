(function(t){function e(e){for(var r,o,n=e[0],s=e[1],l=e[2],u=0,d=[];u<n.length;u++)o=n[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);p&&p(e);while(d.length)d.shift()();return c.push.apply(c,l||[]),a()}function a(){for(var t,e=0;e<c.length;e++){for(var a=c[e],r=!0,n=1;n<a.length;n++){var s=a[n];0!==i[s]&&(r=!1)}r&&(c.splice(e--,1),t=o(o.s=a[0]))}return t}var r={},i={app:0},c=[];function o(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=r,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(a,r,function(e){return t[e]}.bind(null,r));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/catalog/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],s=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var p=s;c.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0564":function(t,e,a){},"20e0":function(t){t.exports=JSON.parse('[{"id":"1","name":"Ручка дверная","code":"L422WH","price":{"old_price":400,"current_price":355},"image":{"url":"pic1.png"},"material":1},{"id":"2","name":"Ручка, нержавеющ сталь","code":"L423WH","price":{"old_price":400.9,"current_price":355.555},"image":{"url":"pic2.png"},"material":2},{"id":"3","name":"Стандартные петли","code":"P424WN","price":{"old_price":null,"current_price":75},"image":{"url":"pic3.png"},"material":2},{"id":"4","name":"Петля со стопором","code":"PW5AC","price":{"old_price":270,"current_price":200},"image":{"url":"pic4.png"},"material":2},{"id":"5","name":"Ручка дверная","code":"LM352","price":{"old_price":null,"current_price":720},"image":{"url":"pic1.png"},"material":1},{"id":"6","name":"Ручка, нержавеющ сталь","code":null,"price":{"old_price":null,"current_price":355.555},"image":{"url":"pic2.png"},"material":2},{"id":"7","name":"Стандартные петли","code":"WD14LK","price":{"old_price":null,"current_price":75},"image":{"url":"pic3.png"},"material":2},{"id":"8","name":"Петля со стопором","code":null,"price":{"old_price":1200,"current_price":900},"image":{"url":"pic4.png"},"material":2}]')},2135:function(t,e,a){t.exports=a.p+"img/pic3.c32a5ec5.png"},"272d":function(t,e,a){"use strict";a("0564")},"2fb4":function(t,e,a){},"3c1b":function(t,e,a){"use strict";a("a0c7")},"56d7":function(t,e,a){"use strict";a.r(e);var r=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Main")],1)},c=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main"},[t._m(0),a("div",{staticClass:"main__title"},[t._v("Комплекты стеллажных систем")]),a("div",{staticClass:"main__container"},[t.loading?a("Loader"):a("Catalog")],1)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main__location"},[t._v(" Главная / Системы хранения / "),a("span",[t._v("Комплекты стеллажных систем")])])}],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"catalog"},[a("div",{staticClass:"catalog__select-container"},[a("div",{staticClass:"catalog__select"},[a("div",{staticClass:"catalog__subtitle"},[t._v("Сортировать по:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.sortPrice,expression:"sortPrice"}],attrs:{name:"price"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortPrice=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"all"}},[t._v("---")]),t._l(t.sortPriceItems,(function(e,r){return a("option",{key:r,domProps:{value:e.value}},[t._v(" "+t._s(e.name)+" ")])}))],2)]),a("div",{staticClass:"catalog__select"},[a("div",{staticClass:"catalog__subtitle"},[t._v("Материал:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.sortMaterial,expression:"sortMaterial"}],attrs:{name:"material"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortMaterial=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"all"}},[t._v("---")]),t._l(t.sortMaterialItems,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}))],2)])]),a("div",{key:t.componentKey,staticClass:"catalog__content",attrs:{id:"items"}},t._l(t.currentItems,(function(t,e){return a("Item",{key:e,attrs:{data:t}})})),1)])},l=[],p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"item"},[t.data.sale?r("div",{staticClass:"item__sale"},[r("p",[t._v("Скидка")])]):t._e(),r("div",{staticClass:"item__image"},[r("img",{attrs:{src:a("805e")("./"+t.data.image.url),alt:"pic"}})]),r("div",{staticClass:"item__info"},[t.data.code?r("div",{staticClass:"item__subtext"},[t._v(t._s(t.data.code))]):t._e(),r("div",{staticClass:"item__name"},[t._v(t._s(t.data.name))]),r("div",{staticClass:"item__block item__block_between"},[r("div",{staticClass:"item__block"},[t.data.price.old_price?r("div",{staticClass:"item__price_old"},[t._v(" "+t._s(t.data.price.old_price)+" ")]):t._e(),r("div",{staticClass:"item__price"},[t._v(t._s(t.data.price.current_price))])]),r("div",{staticClass:"item__block"},[r("div",{staticClass:"item__icon item__icon_cart",class:{"item__icon_cart-add":t.cart},on:{click:t.chgCartState}}),r("div",{staticClass:"item__icon item__icon_favorites",class:{"item__icon_favorites-add":t.favorites},on:{click:t.chgFavoritesState}})])])])])},u=[],d={props:["data"],data:()=>({cart:!1,favorites:!1}),created(){localStorage.cart.includes(`/${this.data.id}/`)&&(this.cart=!0),localStorage.favorites.includes(`/${this.data.id}/`)&&(this.favorites=!0)},methods:{chgCartState(){this.cart?(localStorage.cart.replace(`/${this.data.id}/`,""),this.cart=!1):(localStorage.cart+=`/${this.data.id}/`,this.cart=!0)},chgFavoritesState(){this.favorites?(localStorage.favorites.replace(`/${this.data.id}/`,""),this.favorites=!1):(localStorage.favorites+=`/${this.data.id}/`,this.favorites=!0)}}},_=d,m=(a("d22b"),a("2877")),g=Object(m["a"])(_,p,u,!1,null,"66610572",null),f=g.exports,v={name:"Catalog",data:()=>({sortPrice:"",sortMaterial:"",sortPriceItems:[{value:"increase",name:"Цена по возрастанию"},{value:"decrease",name:"Цена по убыванию"}],sortMaterialItems:[],componentKey:0}),mounted(){this.sortMaterialItems=this.$store.getters.materials,this.sortPrice=this.$store.getters.sortPriceType,this.sortMaterial=this.$store.getters.sortMaterialType},watch:{sortPrice(){this.$store.dispatch("sortCatalog",this.sortPrice),this.componentKey+=1}},computed:{currentItems(){return this.componentKey+=1,"all"===this.sortMaterial?this.$store.getters.catalog:this.$store.getters.catalogByType(this.sortMaterial)}},components:{Item:f}},h=v,y=(a("3c1b"),Object(m["a"])(h,s,l,!1,null,"28d964ae",null)),C=y.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loader"},[t._v("Loading...")])},M=[],w=(a("c2ca"),{}),P=Object(m["a"])(w,b,M,!1,null,"7a72252e",null),$=P.exports,O={name:"Main",data:()=>({loading:!0,error:!1}),async mounted(){this.$store.getters.catalog&&(await this.$store.dispatch("fetchCatalog"),await this.$store.dispatch("fetchMaterial"),await this.$store.dispatch("fetchCatalogByType")),localStorage.cart||(localStorage.cart="",localStorage.favorites=""),this.loading=!1},components:{Catalog:C,Loader:$}},x=O,S=(a("272d"),Object(m["a"])(x,o,n,!1,null,"65ee20f0",null)),T=S.exports,j={name:"app",components:{Main:T}},k=j,E=Object(m["a"])(k,i,c,!1,null,null,null),I=E.exports,L=a("2f62"),N=a("20e0"),K=a("5914");r["a"].use(L["a"]);var W=new L["a"].Store({state:{catalog:[],materials:[],typeCatalog:[],sortPriceType:"all",sortMaterialType:"all"},mutations:{updateCatalog(t,e){t.catalog=e},updateMaterial(t,e){t.materials=e},sortCatalog(t,e){"all"!==e&&("increase"===e?(t.catalog.sort((t,e)=>t.price.current_price>e.price.current_price?1:e.price.current_price>t.price.current_price?-1:0),t.typeCatalog.forEach(t=>{t&&t.sort((t,e)=>t.price.current_price>e.price.current_price?1:e.price.current_price>t.price.current_price?-1:0)})):(t.catalog.sort((t,e)=>t.price.current_price>e.price.current_price?-1:e.price.current_price>t.price.current_price?1:0),t.typeCatalog.forEach(t=>{t&&t.sort((t,e)=>t.price.current_price>e.price.current_price?-1:e.price.current_price>t.price.current_price?1:0)})))},updateTypeCatalog(t){t.catalog.forEach(e=>{t.typeCatalog[e.material]?t.typeCatalog[e.material].push(e):t.typeCatalog[e.material]=[e]})}},actions:{async fetchCatalog(t){try{let e=N;await t.commit("updateCatalog",e)}catch(e){console.log("e")}},async fetchMaterial(t){try{let e=K;await t.commit("updateMaterial",e)}catch(e){console.log("e")}},async fetchCatalogByType(t){try{await t.commit("updateTypeCatalog")}catch(e){console.log("e")}},sortCatalog(t,e){t.commit("sortCatalog",e)}},getters:{catalog:t=>t.catalog,materials:t=>t.materials,sortPriceType:t=>t.sortPriceType,sortMaterialType:t=>t.sortMaterialType,catalogByType:t=>e=>t.typeCatalog[e]},modules:{}});a("2fb4");r["a"].config.productionTip=!1,new r["a"]({store:W,render:function(t){return t(I)}}).$mount("#app")},5914:function(t){t.exports=JSON.parse('[{"id":"1","name":"Дерево"},{"id":"2","name":"Металл"}]')},"805e":function(t,e,a){var r={"./pic1.png":"a0a8","./pic2.png":"8332","./pic3.png":"2135","./pic4.png":"b5e5"};function i(t){var e=c(t);return a(e)}function c(t){if(!a.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=c,t.exports=i,i.id="805e"},8332:function(t,e,a){t.exports=a.p+"img/pic2.ce8b9bfa.png"},"9afd":function(t,e,a){},"9db7":function(t,e,a){},a0a8:function(t,e,a){t.exports=a.p+"img/pic1.fe078d58.png"},a0c7:function(t,e,a){},b5e5:function(t,e,a){t.exports=a.p+"img/pic4.faf7e77a.png"},c2ca:function(t,e,a){"use strict";a("9afd")},d22b:function(t,e,a){"use strict";a("9db7")}});
//# sourceMappingURL=app.f689a6c0.js.map